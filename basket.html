<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <title>Basket | Glacier Guys</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    
    <!-- Additional CSS -->
    <style>
        .image {
            width: 220px;
            height: 150px;
        }
        .btn_Remove {
            border: none;
            background-color: inherit;
            padding: 14px 28px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- Navigation Bar -->
    <div class="topnav">
    <div id="searchResults"></div>
    <a href="aboutus.html">About Us
        <ion-icon name="person-circle-outline"></ion-icon>
    </a>
    <a href="aboutus.html">Log In
        <ion-icon name="log-in-outline"></ion-icon>
    </a>
    <a href="checkout.html">View Basket
        <ion-icon name="basket-outline"></ion-icon>
    </a>
    <a href="contactus.html">Contact Us
        <ion-icon name="call-outline"></ion-icon>
    </a>
    <a href="products.html">Products
        <ion-icon name="shirt-outline"></ion-icon>
    </a>
    <a class="" href="home.html">Home
        <ion-icon name="home"></ion-icon>
    </a>
    <div class="imgtopnav"></div>
    <div class="glacier-guys">Glacier Guys</div> 
    <div class="subtitle">"Stay Warm, Embrace Style: Elevating Winter for the Modern Man!"</div>
    <img src="images/Glacier Guys.png" alt="pic">
    </div>


    <!-- Title -->
    <section class="Checkout_Title">
        <div style="padding-top: 80px;" class="container-title">
            <h2 class="text-center mb-5">Basket</h2>
            <div class="row justify-content-center">
                <div class="col-md-8">
                </div>
            </div>
        </div>
    </section>

    <!-- Items -->
    <section class="Items">
        <div class="container-items">
            <h2 class="text-lg-left text-center">Items</h2>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <div class="card border-0 shadow rounded">
                        <img src="Picture2.jpg" class="image" alt="Item 1">
                        <div class="card-body">
                            <h5 class="card-title text-dark">Mens White Parka Coat</h5>
                            <p class="card-text">Size M</p>
                            <p class="card-text">Price: £59.99</p>
                            <div class="row justify-content-end">
                                <button class="btn_Remove" data-item-id="1">Remove</button>
                                <input type="number" class="quantity-input" value="1" min="1" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Total section -->
    <section class="Total">
        <div class="container-total">
            <div class="row justify-content-end">
                <div class="col-lg-3">
                    <h2 class="mb-3 total text-left">Total</h2>
                    <div class="mb-5">
                        <div class="d-flex justify-content-between mb-5">
                            <div>
                                <h4 id="subtotal">Sub-total</h4>
                                <h4>Delivery</h4>
                            </div>
                            <div>
                                <h4 id="subtotalAmount">£0.00</h4>
                                <h4>£3.00</h4>
                            </div>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between">
                            <h4>Total</h4>
                            <h4 id="totalAmount">£0.00</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <!-- Proceed to Checkout button -->
    <div class="row justify-content-end">
        <div class="col-lg-1 mb-8">
            <button class="btn btn-primary btn-proceed-to-checkout">Proceed to Checkout</button>
        </div>
    </div>
    </section>

    <footer>
        <a class="socialmedia" href="https://www.instagram.com/" target="_blank">
            <ion-icon size="large" name="logo-instagram"></ion-icon>
        </a>
        <a class="socialmedia" href="https://twitter.com/" target="_blank">
            <ion-icon size="large" name="logo-twitter"></ion-icon>
        </a>
    </footer>
    <script>
        // Sample product details
        const productPrice = 59.99;
        let basketItems = [
            { id: 1, quantity: 1 },
        ];

        function removeItemFromBasket(itemId) {
            const indexToRemove = basketItems.findIndex(item => item.id === parseInt(itemId));
            // If the item is found, remove it from the array
            if (indexToRemove !== -1) {
                basketItems.splice(indexToRemove, 1);
            }

            console.log('Removed item with ID:', itemId);
            console.log('Updated basket:', basketItems);

            updateSubtotal();
        }

        function updateQuantityInBasket(newQuantity, itemId) {
            const indexToUpdate = basketItems.findIndex(item => item.id === parseInt(itemId));
            // If the item is found, update its quantity
            if (indexToUpdate !== -1) {
                basketItems[indexToUpdate].quantity = newQuantity;
            }

            console.log('Updated quantity to:', newQuantity, 'for item with ID:', itemId);
            console.log('Updated basket:', basketItems);

            updateSubtotal();
        }

        function updateSubtotal() {
            const subtotal = basketItems.reduce((acc, item) => acc + (productPrice * item.quantity), 0);
            document.getElementById('subtotalAmount').textContent = `£${subtotal.toFixed(2)}`;
            updateTotal(subtotal);
        }

        function updateTotal(subtotal) {
            const deliveryCost = 3.00;
            const total = subtotal + deliveryCost;
            document.getElementById('totalAmount').textContent = `£${total.toFixed(2)}`;
        }


        document.querySelectorAll('.btn_Remove').forEach(function(button) {
            button.addEventListener('click', function() {
                var itemId = this.getAttribute('data-item-id');
                removeItemFromBasket(itemId);
            });
        });

        document.querySelectorAll('.quantity-input').forEach(function(input) {
            input.addEventListener('input', function() {
                var newQuantity = parseInt(this.value);
                var itemId = this.parentElement.querySelector('.btn_Remove').getAttribute('data-item-id');
                updateQuantityInBasket(newQuantity, itemId);
            });
        });

        document.querySelector('.btn-proceed-to-checkout').addEventListener('click', function() {
        window.location.href = 'ChooseCheckout.html';
        });
            
        updateSubtotal();
    </script>
</body>
</html>


